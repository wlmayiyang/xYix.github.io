---
title: UR#20 题解 - 跳蚤电话 / 机器蚤分组 / 金坷垃
---

# T1 跳蚤电话

>**题目大意.**
>
>现有一棵 $n$ 个节点的树，你可以反复执行如下操作：
>
>- 删去一个叶子。
>- 缩掉一个度为 $2$ 的节点。
>
>求有多少种缩删点的顺序能使最终只剩下 $1$ 号节点。
>
>$n\le 2000$。

自然考虑树形DP。设 $f_u$ 表示 $u$ 有一个不能删的父亲时删光 $u$ 所在子树的方案数。下面为了方便，令 $f_u\leftarrow f_u/\text{siz}(u)$（即，随机选一个操作序列，$f_u$ 能被合法删光的概率）

枚举子树 $u$ 中最后一个被删的点 $v$，显然它一定是被删的。而 $u$ 到 $v$ 的路径上的点一定都是被缩的，而且是它们"所在的块"中最后一个被消除的。

<center><div style="width:40%;margin:0"><img src="https://xyix.gitee.io/images/uoj-R-20-1.png" style="width: 70%" alt=""></div></center>