---
title: uoj#36 ~ #41 题解 - 清华集训 2014
---

# #36 玛里【】斯

如今的贴吧虽然几乎什么都变了，但是提到玛里【】斯时的接龙却依然传承了下来。~~建议申请非物质文化遗产~~

回到正题。

> **题目大意.**
>
> 从可重集 $S=\{a_i\}$ 中等概率随机一个子集 $A$，求 $\left(\bigoplus A\right)^5$ 的期望。

考虑现在有一个 $k$ 维空间，每维都是 $\{0,1\}$，每个点的权值就是它出现的概率。一开始只有 $(0,0,...,0)$ 上是 $1$，其他都是 $0$。

加入一个元素 $x$，那么这个空间会分裂为一个不变的复制品和一个坐标全异或了 $x$ 的复制品，权值均变为原来的 $\dfrac 12$。

我们归纳证明任何非 $0$ 点的权值相等。根据下面的证明，它其实是显然的：

- 如果加入 $x$ 并没有使 $\{x_1,...\}$ 张成的线性空间扩大，即线性基中没有插入 $x$，那么这次操作无事发生，当然不违反权值相等的规则。
- 否则，另一个复制品一定是到了和当前空间完全平行的另一个空间，所以所有点的权值都变成了原来的 $\dfrac 12$，没有违反权值相等的规则。

<div style="width:70%;margin:auto"><img src="/images/uoj-36.png" alt=""></div>

对于此题，由于答案 $\le 2^{63}$ 的限制，对 $k\ge 3$ 我们暴力枚举基中元素即可。$k=1,2$ 则都是傻逼题。

三合一/ruo

# #37 主旋律

给 指 导 狂 喜