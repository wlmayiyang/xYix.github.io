---
title: uoj#95 题解 - 【集训队互测2015】胡策的数列
---

> **题目大意.**
>
> 有递推数列 $a_{i}=-\dfrac{4}{5}a_{i-1}+\dfrac{12}{25}a_i$，可以证明：对于固定的 $a_0=w$，使得 $\forall i,a_i\ge 0$ 的 $a_1$ 唯一，这个唯一的数列 $\{a_i\}$ 记为 $\{a_i(w)\}$。
>
> 你需要维护一个长度为 $n$ 的序列，初始全为 $0$，你要支持 $m$ 个操作
>
> - 把序列中的 $[l,r]$ 这一段填充为 $\{a_i(t)\}$ 的 $[p,p+r-l]$ 这一段；
> - 询问一段区间 $[l,r]$ 中的元素和。
>
> 强制在线，$n\le 10^9,m\le 10^5$，其他均为 $10^9$。

首先研究一下 $a$ 的性质。有递推矩阵
$$
\begin{bmatrix}0&1\\\dfrac{12}{25}&-\dfrac 45\end{bmatrix}
$$
其特征多项式为 $\lambda^2+\dfrac 4 5\lambda-\dfrac{12}{25}$