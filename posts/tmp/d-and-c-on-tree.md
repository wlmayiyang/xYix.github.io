---
title: 树分治学习笔记
---

老年选手⑧会打 LCT，爬了爬了

发现其他树分治我也⑧会，爬了爬了

# 重链剖分

skipped

# 长链剖分

处理树上 $k$ 级祖先问题。一个节点所在的 $k$ 级祖先所在的重链长度一定大于等于 $k$，所以对于 $k$ 我们跳到最大的 $2^x\le k$ 级祖先即可。

# 全局平衡二叉树

树链剖分+线段树的两个 log 是从哪里来的呢，因为它把所有信息全塞进一棵线段树里，导致即使操作一个极短的重链也要重新从这个线段树上走一遍。

所以我们分别建线段树就好了。为了方便跳重链，我们还可以参考 LCT，线段树的根指向链头的父亲。

# 点分治/边分治

通过找重心来分割树使得分治树的高度为 $O(\log)$。容易发现这和线段树的结构很像，边分治甚至还和线段树一样是二叉的，于是可以搞一些骚操作，比如可持久化/合并之类的。点分治也不是不能骚操作，但是多叉可能比较难搞。仔细想想也不难搞。

注意边分治分治树的树高是 $O(\log_{1.5})$  的。

# LCT

LCT 就是用一堆 splay 维护链剖分，这个链剖分选的实链是随便决定的，而由于 splay 支持合并和分裂所以可以进行一个 Access 操作~~（那么问题来了无旋 treap 能不能写 LCT 呢）~~，即把某个点到根的所有虚边转为实边，这样它到根的链就变为一个 splay。

显然这个东西满地都是均摊，但是它就是 $\log n$ 的，小编也非常惊讶。

# dsu on tree

条件非常苛刻，几乎只能是子树查询，无修改。大概就是暴力，但是把重儿子放在最后一个处理，这样处理本树的时候可以重复利用重儿子的信息，使得分治树高度为 $\log$。

# AAA 树

